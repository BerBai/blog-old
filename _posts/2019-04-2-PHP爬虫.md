---
layout:     post
title:      PHP 爬虫
subtitle:   学习参考小结
date:       2019-04-02
author:     柏梓涵
header-img: img/post-bg-pa.jpg
catalog: true
tags:
    - 爬虫
---


## 

```php
<?PHP
   // 通过 file_get_contents 函数获取百度页面源码
   $html = file_get_contents("https://www.baidu.com/index.html");

   // 通过 preg_replace 函数使页面源码由多行变单行
   $htmlOneLine = preg_replace("/\r|\n|\t/","",$html);

   // 通过 preg_match 函数提取获取页面的标题信息
   preg_match("/<title>(.*)<\/title>/iU",$htmlOneLine,$titleArr);

   // 由于 preg_match 函数的结果是数组的形式
   $title = $titleArr[1];

   // 通过 echo 函数输出标题信息
   echo $title;
?>
```

## 爬取图片


```php
<?php
header("Content-type:text/html;Charset=utf-8");

$ch = curl_init();
$url = "https://pixabay.com/";
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.113 Safari/537.36");
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$content = curl_exec($ch);
$string = file_get_contents($url);
preg_match_all("/<img([^>]*)\s*src=('|\")([^'\"]+)('|\")/",
    $string, $matches);
$new_arr = array_unique($matches[3]);
foreach ($new_arr as $key) {
    echo "<img src=$key>";
}

```
